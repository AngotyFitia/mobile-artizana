<ion-content [fullscreen]="true" class="layout-container">
  <div class="welcome-message">
    <h1 id="welcome-text"></h1>
      <p id="welcome-subtext" class="slide-in-text">Ahitanao ireo vokatra vita-tanana Malagasy tena tsara kalitao.</p>
  </div>
  <div class="main-content">
    <div class="sidebar" style="background-color: rgb(252, 247, 226);">
      <p style="color: black; text-align: center; cursor: pointer; margin-bottom: 0;" (click)="toggleFiltres()">Sokajy 
        <ion-icon [name]="afficherFiltres ? 'chevron-up-outline' : 'chevron-down-outline'"></ion-icon>
      </p>
      <div *ngIf="afficherFiltres" class="filtre-container">
        <ion-list style="background-color: rgb(255, 255, 255); border: none;">
    
          <!-- Tous les produits -->
          <ion-item button (click)="filtrerProduits('all')" [class.selected]="filtreActif === 'all'" style="border: none;" > Vokatra rehetra </ion-item>
          <!-- Liste dynamique des catÃ©gories -->
          <ion-item *ngFor="let cat of categories" button (click)="filtrerProduits(cat.idCategorie)" [class.selected]="filtreActif === cat.idCategorie" style="border: none;">{{ cat.intitule }}</ion-item>
        </ion-list>
      </div>
    </div>
    <div class="products-grid">
      <ion-grid>
        <ion-row>
          <ion-col size="4" *ngFor="let produit of produitsFiltres">
            <!-- <pre> {produitsFiltres | json}</pre> -->
            <ion-card [routerLink]="['/home/details-produits', produit.idProduit]" style="cursor: pointer;">
              <img *ngIf="produit.photosProduit.length > 0" [src]="'data:image/jpeg;base64,' + produit.photosProduit[0].photoBase64" alt="Produit" />
              <ion-card-header>
                <ion-card-title>{{ produit.intitule }}</ion-card-title>
                <ion-card-subtitle>Vokarin'i mpikambana "{{ produit.societe.nom }}"</ion-card-subtitle>
                <ion-card-subtitle> Vidiny: {{ produit.prixProduit.prix | number:'1.2-2' }} ar monja</ion-card-subtitle>
              </ion-card-header>
            </ion-card>            
          </ion-col>
        </ion-row>
      </ion-grid>
    </div>
  </div>
</ion-content>
